{% extends 'admin_base.html.twig' %}

{% block page1 %}
    <script src="{{ asset('node_modules/chart.js/dist/Chart.js') }}"></script>
    <canvas id="myChart"></canvas>
    <script>
        chart();
        function chart() {
            const ctx = document.getElementById('myChart').getContext('2d');
            const xlabel = getData();
            const myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: xlabel,
                    datasets: [{
                        label: 'Users/Day',
                        data: [12, 19, 3, 5, 2, 3],
                        borderWidth: 1,
                        backgroundColor: "rgba(30,158,5,1)",
                    }]
                },
                options: {
                    legend: {
                        labels: {
                            fontColor: 'orange'
                        }
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero:true,
                                fontColor: 'white',
                                fontSize: 20
                            },
                        }],
                        xAxes: [{
                            ticks: {
                                fontColor: 'white',
                                fontSize: 20
                            }
                        }]
                    }

                }
            });
        }


        function getData() {
            const curr = new Date;
            const first = curr.getDate() - curr.getDay();
            const second = curr.getDate() - curr.getDay() + 1;
            const third = curr.getDate() - curr.getDay() + 2;
            const fourth = curr.getDate() - curr.getDay() + 3;
            const fifth = curr.getDate() - curr.getDay() + 4;
            const sixth = curr.getDate() - curr.getDay() + 5;
            const seventh = curr.getDate() - curr.getDay() + 6;

            const firstDay = new Date(curr.setDate(first));
            const secondDay = new Date(curr.setDate(second));
            const thirdDay = new Date(curr.setDate(third));
            const fourthDay = new Date(curr.setDate(fourth));
            const fifthDay = new Date(curr.setDate(fifth));
            const sixthDay = new Date(curr.setDate(sixth));
            const seventhDay = new Date(curr.setDate(seventh));

            const week = [];
            week.push( firstDay.getFullYear() + "/" + (1+firstDay.getMonth()) + "/" + firstDay.getDate()
            ,secondDay.getFullYear() + "/" + (1+secondDay.getMonth()) + "/" + secondDay.getDate()
            ,thirdDay.getFullYear() + "/" + (1+thirdDay.getMonth()) + "/" + thirdDay.getDate()
            ,fourthDay.getFullYear() + "/" + (1+fourthDay.getMonth()) + "/" + fourthDay.getDate()
            ,fifthDay.getFullYear() + "/" + (1+fifthDay.getMonth()) + "/" + fifthDay.getDate()
            ,sixthDay.getFullYear() + "/" + (1+sixthDay.getMonth()) + "/" + sixthDay.getDate()
            ,seventhDay.getFullYear() + "/" + (1+seventhDay.getMonth()) + "/" + seventhDay.getDate()
            )

            return week;
        }
    </script>
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/admin_1.css') }}">
{% endblock %}